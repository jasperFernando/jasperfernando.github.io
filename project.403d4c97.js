console.clear();let mousePos={x:0,y:0},mousePosCache=mousePos,direction={x:mousePosCache.x-mousePos.x,y:mousePosCache.y-mousePos.y},cursors=[];class App{constructor(){preloader(".menu__item").then((()=>{Splitting();const e=document.querySelector(".menu");new LocomotiveScroll({el:e,smooth:!0}),new Menu(e),cursors.push(new Cursor(document.querySelector(".cursor__small"),0),new Cursor(document.querySelector(".cursor__large"),.4)),window.addEventListener("mousemove",(e=>{mousePos=getMousePos(e),cursors.forEach((e=>{e.update()}))}))}))}}class Menu{constructor(e){this.el=e,this.menuItems=this.el.querySelectorAll(".menu__item"),this.animatableProperties={tx:{previous:0,current:0,amt:.1},ty:{previous:0,current:0,amt:.1},rotation:{previous:0,current:0,amt:.08},skewx:{previous:0,current:0,amt:.08},brightness:{previous:1,current:1,amt:.08},saturation:{previous:0,current:0,amt:.1}},this.menuItemInstances=[],[...this.menuItems].forEach(((e,t)=>this.menuItemInstances.push(new MenuItem(e,t,this.animatableProperties)))),gsap.to(this.el,.1,{opacity:1}),this.showMenuItems()}showMenuItems(){gsap.fromTo(this.menuItemInstances.map((e=>e.DOM.innerText)),{rotation:e=>e%2==0?15:-15},{duration:1.2,ease:"Expo.easeOut",transformOrigin:e=>e%2==0?"left bottom":"right bottom",y:0,rotation:0,delay:e=>.15+.06*e})}}class MenuItem{constructor(e,t,s){this.DOM={el:e},this.DOM.innerText=this.DOM.el.querySelector(".menu__item-innertext"),this.menuItemIndex=t,this.animatableProps=s,this.imageURL=this.DOM.el.getAttribute("data-img"),this.layout(),this.initEvents()}layout(){this.DOM.card=document.createElement("div"),this.DOM.card.className="image-card",this.DOM.cardInner=document.createElement("div"),this.DOM.cardInner.className="image-card__inner",this.DOM.cardImage=document.createElement("div"),this.DOM.cardImage.className="image-card__img",this.DOM.cardImage.style.backgroundImage=`url(${this.imageURL})`,this.DOM.cardInner.appendChild(this.DOM.cardImage),this.DOM.card.appendChild(this.DOM.cardInner),this.DOM.el.appendChild(this.DOM.card)}initEvents(){this.DOM.el.addEventListener("mouseenter",(()=>{this.showImage(),this.firstRAFCycle=!0,this.renderLoop()})),this.DOM.el.addEventListener("mouseleave",(()=>{this.stopRender(),this.hideImage()}))}calcBounds(){this.bounds={el:this.DOM.el.getBoundingClientRect(),card:this.DOM.card.getBoundingClientRect(),cardImage:this.DOM.cardImage.getBoundingClientRect()}}showImage(){gsap.killTweensOf(this.DOM.cardInner),gsap.killTweensOf(this.DOM.cardImage),gsap.timeline({onStart:()=>{this.DOM.el.style.zIndex=this.DOM.el.children.length}}).to(this.DOM.cardInner,{duration:.8,ease:"elastic.out(1, 0.75)",transformOrigin:"50% "+(direction.y<0?"-20%":"120%"),startAt:{rotation:(direction.x<0?"+":"-")+"25deg"},rotation:0}).to(this.DOM.cardImage,{duration:.2,ease:"Sine.easeOut",startAt:{opacity:0,scale:.6},opacity:1,scale:1},0)}hideImage(){gsap.killTweensOf(this.DOM.cardInner),gsap.killTweensOf(this.DOM.cardImage),gsap.timeline({onStart:()=>{this.DOM.el.style.zIndex=1}}).to(this.DOM.cardInner,{duration:.8,ease:"elastic.out(1, 0.75)",transformOrigin:"50% "+(direction.y<0?"-20%":"120%"),rotation:(direction.x<0?"+":"-")+"25deg"}).to(this.DOM.cardImage,{duration:.2,ease:"Sine.easeOut",opacity:0,scale:.6},0)}renderLoop(){this.requestId||(this.requestId=requestAnimationFrame((()=>this.render())))}stopRender(){this.requestId&&(window.cancelAnimationFrame(this.requestId),this.requestId=void 0)}render(){this.requestId=void 0,this.firstRAFCycle&&this.calcBounds(),this.updateAnimatableProps(),direction={x:mousePosCache.x-mousePos.x,y:mousePosCache.y-mousePos.y},mousePosCache=mousePos,gsap.set(this.DOM.card,{x:this.animatableProps.tx.previous,y:this.animatableProps.ty.previous,rotation:this.animatableProps.rotation.previous,skewX:this.animatableProps.skewx.previous,filter:`brightness(${this.animatableProps.brightness.previous}) saturate(${this.animatableProps.saturation.previous})`}),this.firstRAFCycle=!1,this.renderLoop()}updateAnimatableProps(){const e=clamp(Math.abs(mousePosCache.x-mousePos.x),0,100);this.animatableProps.tx.current=Math.abs(mousePos.x-this.bounds.el.left)-this.bounds.card.width/2,this.animatableProps.ty.current=Math.abs(mousePos.y-this.bounds.el.top)-this.bounds.card.height/2,this.animatableProps.rotation.current=this.firstRAFCycle?0:map(e,0,100,0,direction.x<0?30:-30),this.animatableProps.skewx.current=this.firstRAFCycle?0:map(e,0,100,1,direction.x<0?-60:60),this.animatableProps.brightness.current=this.firstRAFCycle?1:map(e,0,100,1,10),this.animatableProps.saturation.current=this.firstRAFCycle?1:map(e,0,100,1,8);for(const e in this.animatableProps)this.animatableProps[e].previous=this.firstRAFCycle?this.animatableProps[e].current:lerp(this.animatableProps[e].previous,this.animatableProps[e].current,this.animatableProps[e].amt)}}class Cursor{constructor(e,t){this.el=e,this.duration=t,this.el.style.opacity=0,this.bounds=this.el.getBoundingClientRect()}update(){gsap.to(this.el,{duration:this.duration,opacity:1,x:mousePos.x-this.bounds.width/2,y:mousePos.y-this.bounds.height/2})}}function preloader(e){return new Promise((t=>{const s=document.createElement("div");s.style.visibility="hidden",document.body.appendChild(s),[...document.querySelectorAll(e)].forEach((e=>{const t=document.createElement("img");t.style.width=0,t.src=e.dataset.img,t.className="preload",s.appendChild(t)})),imagesLoaded(document.querySelectorAll(".preload"),(()=>{gsap.to(".loading__wrapper",{duration:.8,opacity:0,pointerEvents:"none",onComplete:()=>{s.parentNode.removeChild(s),document.body.classList.remove("loading"),t()}})}))}))}function map(e,t,s,i,a){return(e-t)*(a-i)/(s-t)+i}function lerp(e,t,s){return(1-s)*e+s*t}function clamp(e,t,s){return e<=t?t:e>=s?s:e}function getMousePos(e){let t=0,s=0;return e||(e=window.event),e.pageX||e.pageY?(t=e.pageX,s=e.pageY):(e.clientX||e.clientY)&&(t=e.clientX+body.scrollLeft+document.documentElement.scrollLeft,s=e.clientY+body.scrollTop+document.documentElement.scrollTop),{x:t,y:s}}const app=new App;
//# sourceMappingURL=project.403d4c97.js.map
